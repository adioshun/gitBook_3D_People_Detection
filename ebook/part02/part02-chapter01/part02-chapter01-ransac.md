# 1\_RANSAC



1. 모델 기반 세분화, RANSAC  

RANSAC은Random Sample Consensus의  약어로 sample consensus 모듈에서 제공하는 여러 SAC계열 방식중에 하나로 잡음등에 강건하여 많이 사용 되고있습니다.  1981년 Martin A에  의해  제안된  방법입니다\(Fischler & Bolles, 1981\). 점군  안에  선, 원통, 평면  등과  같은  특정 Model이  있다는  가정하에  해당  모델의  파라미터를  추정  하고  이  후 cloud point가  이 model에  속하는지  아닌지를  무작위\(Random\)로 point들을  선별\(sample\)하여  일치\(Consensus\)하는지  테스트  하는  방법을  이야기  합니다. RANSAC의 장점은 모델 파라미터에 대해 강건한 예측수행이 가능합니. 즉, outliers이 많이 포함되어 있어도 높은 정확도를 보인다. 

단점으로는 계산 부하가 크고 각 대상에 따라 사용자가 직접 thresholds를 설정해 주어야 합니다. 또한, 하나의 데이터셋에 하나의 모델만 적용이 가능하다는 단점도 있습니다. 

![](data:image/png;base64,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)

왼쪽 이미지의 회색은 입력 데이터로 사용되는 Point cloud입니다. 오른쪽 이미지에서 파란색 Line은 사용하고자 하는 Model입니다. RANSAC에서는 모델+파라미터에 맞으면 Inlier라 하고 맞지 않으면 outlier라고 합니다. 즉, 빨간색 점은 Outlier이고, 파란색 점은 Inlier입니다. 

동작과정은 다음과 같습니다\(오일석, 2014\).  

1. A model is fitted to the hypothetical inliers, i.e. all free parameters of the model are reconstructed from the inliers. 
2. All other data are then tested against the fitted model and, if a point fits well to the estimated model, also considered as a hypothetical inlier. 
3. The estimated model is reasonably good if sufficiently many points have been classified as hypothetical inliers. 
4. The model is reestimated from all hypothetical inliers, because it has only been estimated from the initial set of hypothetical inliers. 
5. Finally, the model is evaluated by estimating the error of the inliers relative to the model. 

RANSAC과 평면 모델을 이용하ㅕ 지면과 물체를 세분화 할수 있습니다. 탐지 하려는 대부분의 물체는 지표면에 닿아 있습니다. 물건은 선반/책상위에, 차량은 도로 위에 존재 합니다1. 지면을 제거하게 되면 각각의 오브젝트 들이 서로 연결되지 않고 떨어지기 때문에 구분이 쉬워집니다. 

사용되는 파라미터는 아래와 같습니다.  

| 파라미터  | 설명  |
| :--- | :--- |
| setInputCloud  | 입력   |
| setModelType  | 적용 모델  |
| setMethodType  | 적용 방법  |
| setMaxIterations  | 최대 실행 수  |
| setDistanceThreshold  | inlier로 처리할 거리 정보  |
| setOptimizeCoefficients  | \(옵션\)  |
| segment  | 출력, 추정된 파라미터   |



```cpp
#include <iostream>
#include <pcl/ModelCoefficients.h>
#include <pcl/io/pcd_io.h>
#include <pcl/point_types.h>
#include <pcl/sample_consensus/method_types.h>
#include <pcl/sample_consensus/model_types.h>
#include <pcl/segmentation/sac_segmentation.h>
#include <pcl/filters/voxel_grid.h>
#include <pcl/filters/extract_indices.h>

//Plane model segmentation
//http://pointclouds.org/documentation/tutorials/planar_segmentation.php#planar-segmentation

int
main (int argc, char** argv)
{

  pcl::PointCloud<pcl::PointXYZRGB>::Ptr cloud (new pcl::PointCloud<pcl::PointXYZRGB>), 
                                        cloud_p (new pcl::PointCloud<pcl::PointXYZRGB>), 
                                        cloud_f (new pcl::PointCloud<pcl::PointXYZRGB>);

  // *.PCD 파일 읽기 (https://raw.githubusercontent.com/adioshun/gitBook_Tutorial_PCL/master/Beginner/sample/tabletop_passthrough.pcd)
  pcl::io::loadPCDFile<pcl::PointXYZRGB> ("tabletop_passthrough.pcd", *cloud);

  // 포인트수 출력
  std::cout << "Loaded :" << cloud->width * cloud->height  << std::endl;
  
  pcl::ModelCoefficients::Ptr coefficients (new pcl::ModelCoefficients ());
  pcl::PointIndices::Ptr inliers (new pcl::PointIndices ());


  // 오프젝트 생성 
  pcl::SACSegmentation<pcl::PointXYZRGB> seg;
  seg.setOptimizeCoefficients (true);       //(옵션)
  seg.setInputCloud (cloud);                 //입력 
  seg.setModelType (pcl::SACMODEL_PLANE);    //적용 모델 
  seg.setMethodType (pcl::SAC_RANSAC);       //적용 방법 
  seg.setMaxIterations (1000);               //최대 실행 수
  seg.setDistanceThreshold (0.01);          //inlier로 처리할 거리 정보 
  seg.segment (*inliers, *coefficients);    //세그멘테이션 적용 
 

  if (inliers->indices.size () == 0)
  {
    PCL_ERROR ("Could not estimate a planar model for the given dataset.");
    return (-1);
  }

  //추정된 평면 파라미터 출력 (eg. ax + by + cz + d = 0 ).
  std::cerr << "Model coefficients: " << coefficients->values[0] << " " 
                                      << coefficients->values[1] << " "
                                      << coefficients->values[2] << " " 
                                      << coefficients->values[3] << std::endl;

  std::cerr << "Model inliers: " << inliers->indices.size () << std::endl;
  
  num_loop = 
  for (std::size_t i = 0; i < inliers->indices.size (); ++i)
  std::cerr << inliers->indices[i] << "    " << cloud->points[inliers->indices[i]].x << " "
                                             << cloud->points[inliers->indices[i]].y << " "
                                             << cloud->points[inliers->indices[i]].z << std::endl;


  // Create the filtering object
  //Extracting indices from a PointCloud
//http://pointclouds.org/documentation/tutorials/extract_indices.php
  pcl::ExtractIndices<pcl::PointXYZRGB> extract;
  // Extract the inliers
 extract.setInputCloud (cloud);
 extract.setIndices (inliers);
 extract.setNegative (true);//false
 extract.filter (*cloud_p);
 std::cerr << "Filtered : " << cloud_p->width * cloud_p->height << " data points." << std::endl;

 std::stringstream ss;
 ss << "RANSAC_plane_true.pcd"; //RANSAC_plane_false.pcd
 pcl::PCDWriter writer2;
 writer2.write<pcl::PointXYZRGB> (ss.str (), *cloud_p, false);


  return (0);

 
}
```

실행 결과

```text
Point cloud data: 15 points
    0.352222 -0.151883 2
    -0.106395 -0.397406 1
    -0.473106 0.292602 1
    -0.731898 0.667105 -2
[pcl::SACSegmentation::initSAC] Setting the maximum number of iterations to 50
Model coefficients: 0 0 1 -1
Model inliers: 12
1    -0.106395 -0.397406 1
2    -0.473106 0.292602 1
4    0.441304 -0.734766 1
```

시각화 & 결과

```text
$ pcl_viewer tabletop_passthrough.pcd 
$ pcl_viewer RANSAC_plane.pcd  
$ pcl_viewer RANSAC_plane_true.pcd
```

| [![](https://camo.githubusercontent.com/d60875d7e7bd5503e4a5e86557f6fe7eba61e3e0/68747470733a2f2f692e696d6775722e636f6d2f7168637a5266572e706e67)](https://camo.githubusercontent.com/d60875d7e7bd5503e4a5e86557f6fe7eba61e3e0/68747470733a2f2f692e696d6775722e636f6d2f7168637a5266572e706e67) | [![](https://camo.githubusercontent.com/6733c3b8ab6504daa00549d9b8f4077c27639527/68747470733a2f2f692e696d6775722e636f6d2f55706f37425a4b2e706e67)](https://camo.githubusercontent.com/6733c3b8ab6504daa00549d9b8f4077c27639527/68747470733a2f2f692e696d6775722e636f6d2f55706f37425a4b2e706e67) | [![](https://camo.githubusercontent.com/1ec4e739b475d193469af8126b8c53915140c76e/68747470733a2f2f692e696d6775722e636f6d2f6a36486f4a42792e706e67)](https://camo.githubusercontent.com/1ec4e739b475d193469af8126b8c53915140c76e/68747470733a2f2f692e696d6775722e636f6d2f6a36486f4a42792e706e67) |
| :--- | :--- | :--- |
| 원본`tabletop_passthrough.pcd` | 결과`setNegative (false)` | 결과 `setNegative (true)` |

